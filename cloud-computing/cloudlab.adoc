ifndef::bound[]
:imagesdir: img
endif::[]

This lab is to introduce Cloud Computing using the AWS Cloud environment from Amazon. In this lab, you will not be responsible for setting up your own AWS environment. Your instructor will provide you with information to access AWS. When you first login to AWS, you will see the AWS dashboard. This is all of the services that are provided. However, you won’t have access to all of these services as your instructor will have set up administrative policies to only enable access to certain areas. 

.AWS Dashboard
image::IMG1.png[AWS Dashboard]

Everyone in the class will see the dashboard but your instructure will be responsible for setting up your EC2 instance. While you don't need to do the following, these are the steps that your instructor will go through when setting up your instance: 

* On the dashboard, clicking on the EC2 link. This link will enable us to launch a virtual machine in the AWS environment. 

.AMI Choice
image::IMG2.png[AMI Choice]

* I will choose the first Amazon API. This is a distribution of Linux specific to Amazon. 

.Instance Type
image::IMG3.png[Instance Type]

* You have many options for the size of your virtual machine. I will choose the t2.micro free tier and click Next. 

.Instance Details 
image::IMG4.png[Instance Details]

* Configure Details -- I will leave the defaults and click Next. Note thought that this is where I can assign a particular subnet. 

.Storage
image::IMG5.png[Storage]

* Storage -- I will leave t defaheults and click Next. 

.Tags
image::IMG6.png[Tags]

* Tags -- I will leave the defaults and click Next. 

.Security Group
image::IMG7.png[Security Group]

* For Configure Security Group, I have set up a 3400 Security Group. You will see that this group will give you the ability to run HTTP (both port 80 and 8080), SSH, and Ping traffic. I'll then click Review and Launch

.Review
image::IMG8.png[Review]

* When I click Launch, I am asked to Choose/Select a key pair. 

.Key Pair
image::IMG9.png[Key Pair]

* For each person, I create a new key pair and enter your name for the key pair. I downloaded them and emailed them to you. Once I do this, I can return to my EC2 Dashboard and find your machine running (you can identify via the key that you just created in the Key Column). In the name column, I also name your machine. 

.EC2 Dashboard
image::IMG10.png[EC2 Dashboard]

* On the dashboard I note your public IP address below. You will need this to access your machine. Note that this IP address will change every time a server is restarted. Now that you have your server running, you have your pem key, and you have your IP address, you can login to your EC2 machine. 

ON MAC
Use your terminal/command tool to navigate to the folder where your pem key is: 

`$ chmod 400 YourName.pem`

Login to the EC2 instance 
> ssh -i "YourName.pem" ec2-user@your.ip.address.here

ON WINDOWS
Download Putty and PuttyGen. Using PuttyGen you have to convert the pem key that you have to a ppk key that Putty will understand. There is a tutorial provided from Amazon here: 

https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/putty.html 

Once you have converted your key to a ppk key, open Putty and in the hostname/address type: 

ec2-user@your.ip.address

Scroll down to connection-SSH-auth and browse to your newly created ppk key. 

.Putty
image::IMG11.png[Putty]

* Before you click Open, you should scroll back up to Terminal and name and save your connection so you don’t have to locate your ppk key every time. Click Open. Whether on a Mac or Windows, you are now logged on: 

.EC2 SSH
image::IMG12.png[EC2 SSH]

* Now that you are on your AWS cloud instance, you will revisit few of your prior labs. First, you should have noticed a few other servers in your EC2 dashboard. Can you ping the other servers? Are you on the same subnet? Work with a partner in class and see if you can ping each other (you will have to exchange your IP addresses). 

* Next, we are going revisit the Apache Web Server lab. Install the Apache Web Server and run the server on port 8080. Note that Amazon Linux uses the ‘yum install’ command and not ‘apt install’ as we have been doing with Ubuntu. 

1)	Install the Apache web server and run the server on port 8080
2)	Show the home page on port 8080

* In addition to EC2, you are going explore one more component of AWS – The Simple Storage Solution (S3). From your AWS console, you will be able to go to S3. This is a different way of managing resources versus me builing your EC2 intance. Once logged in, you should see the following dashboard. 

.S3 Dashboard
image::IMG13.png[S3 Dashboard]

* Once in S3, you will see a bucket named 3400development. You can click on that bucket and you’ll be able to upload and view images. You could download it from the S3 interface but I’d actually like you to download it to your EC2 instance. You can do this very easily via the wget command. Return to your instance and type: 

> wget https://nameofyourendpoint.com (e.g., wget https://s3-us-west-2.amazonaws.com/3400development/Development/koala.jpg)

* The point is to simply demonstrate the connection of resources in the AWS space.  

* Finally, updated your EC2 index.html page to include your S3 image. 

QUESTIONS TO ANSWER: 
- Can you ping other machines in your same VPC (region)? 
- Can you ping other machings across VPCs? 
- Explain what is going on with respect to subnets and virtual private clouds (regions).

- Explain what is going on resource-wise in this lab. How are resources currently being distributed and managed? 

