ifndef::bound[]
:imagesdir: img
endif::[]

This lab is intended to give you just a bit more insight with respect to AWS cloud computing. In this lab, you will be setting up two machines and having them talk to (ping) each other. This isn't very difficult but along the way we will make a few observations as to the power you have as an AWS manager -- to both observe and set rules. 

To start, login to your AWS Educate account and make sure you are in the N. Virginia region. This seems to be the region that gives us the resources we need. Locate the VPC services. There you will see VPCs along with other services in the VPC dashboard. 

.VPC
image::1.png[VPC]

{nbsp} +
{nbsp} +
 
 Click on the VPCs link and from there click Create VPC

.Create VPC
image::2.png[Create VPC]

{nbsp} +
{nbsp} +
 
From there, you will name your VPC. You can name it after yourself if you'd like. In the CIDR block, put some block of local addresses. In this case I put a relatively small block of addresses. 

.VPC Settings
image::3.png[VPC Settings]

{nbsp} +
{nbsp} +

Once you have created the VPC, you will need to create a subnet within that VPC. Click on the Subnets over on the left side, then click Create Subnet. 

.Create Subnet
image::4.png[Create Subnet]

{nbsp} +
{nbsp} +

In the create subnet screen fill out the appropriate details. In this case, you have to assign the subnet to the VPC that you just created. Also, In this example, the subnet is the size of the VPC (the blocks are the same size). 

.Subnet Details
image::5.png[Subnet Details]

{nbsp} +
{nbsp} +

Now let's create a route. The route will define where traffic can and can't flow in the VPC/subnet. Click Route Tables on the left side and then click Create route table. 

.Create Route Table
image::6.png[Create Route Table]

{nbsp} +
{nbsp} +

Like the subnet, you assign the route table to a VPC (whatever you named yours). Pretty easy. 

.Route Table Details
image::7.png[Route Table Details]

{nbsp} +
{nbsp} +

At this point, your VPC is starting to get a bit of robustness associated with it. It has a name. It has a subnet. It has a route table. Growing up! Now we need to estabish an Internet Gatewary for your VPC -- so it can go on the internet. Click on Internet Gateways on the left and then click Create Internet Gateway. 

.Internet Gateway
image::8.png[Internet Gateway]

{nbsp} +
{nbsp} +

Name the Internet Gateway and click Create! 

.Internet Gateway Details
image::9.png[Internet Gateway Details]

{nbsp} +
{nbsp} +

SUPER IMPORTANT!!! Once you create the gateway, the next screen will ask if you would like to associate the gateway with a VPC (green bar at the top). You must do this -- associating it with your newly created VPC. 

.Associate Internet Gateway with VPCa
image::9a.png[Associate Internet Gateway with VPCa]

.Associate Internet Gateway with VPCb
image::9b.png[Associate Internet Gateway with VPCb]

{nbsp} +
{nbsp} +

Now return to your Route Table and add the newly created Internet Gateway. 

.Add IG
image::10.png[Add IG]

.Add IGa
image::11.png[Add IGa]

{nbsp} +
{nbsp} +

After clicking the security group you are going to modify, click "Edit Inbound Rules". This will enable us to restrict what is coming into the server. 

.See Current Rules
image::SeeCurrentSecurityRules.png[See Current Rules]

{nbsp} +
{nbsp} +

.Edit Rules
image::EditRules.png[Edit Rules]

{nbsp} +
{nbsp} +

From there, you will modify the rule (simply click in the search box) to select the rule 0.0.0.0/32. Delete any additional ICMP rules. Make sure you don't delete your SSH rule. 

.Only CIDR 32
image::OnlyCIDR32.png[Only CIDR 32]

{nbsp} +
{nbsp} +

Go back to your terminals and show me that one of the machines can no longer be pinged (restricting pings only to the subnet). 

.BlockedPing
image:BlockedPing.png[BlockedPing]

{nbsp} +
{nbsp} +

Finally, go back to your EC2 Dashboard and click on the Key Pairs under Network & Security to show me the two key pairs you made for this lab. 

.Key Pairs
image::KeyPairs.png[Key Pairs]

{nbsp} +
{nbsp} +

Finally, finally... Go ahead and stop (or terminate) your servers. Also, if you are interested, take a look at your total AWS credits. You should see that they have barely been touched. 

QUESTION TO CONSIDER FOR THE FINAL: 

* Why did CIDR/32 work in this case? What is the block of numbers that could have pinged the machine with the modified inbound rule? 

* Now that you've seen a bit more of the Amazon AWS interface, describe some of the administrative power that you would have if you were using this technology to manage servers for people in your organizaion. 

